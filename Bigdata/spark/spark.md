

Apache Spark是一个开源集群运算框架

- 开源
- 高性能
- 易用，支持R、Scala、Jav等
- 通用，支持批处理、流处理、机器学习等多种场景

Spark生态

![1595246924884](img/1595246924884.png)

Apache Spark架构

![1595247249282](img/1595247249282.png)

基本概念

![1595247356497](img/1595247356497.png)



![1595251272054](img/1595251272054.png)

Spark APIS

![1595251434282](img/1595251434282.png)

RDD

![1595251476144](img/1595251476144.png)

可分区——可以实现分布式计算

上图是起4个sq同时执行4个task

![1595251649507](img/1595251649507.png)

![1595251710932](img/1595251710932.png)

![1595251929473](img/1595251929473.png)

RDD：Operations

RDD操作类型1：Transformations,基于已有的RDD生成新的RDD

![1595252016633](img/1595252016633.png)

http://spark.apache.org/docs/2.4.5/rdd-programming-guide.html#transformations

RDD操作类型2：Actions，触发生成job开始运算

![1595252230490](img/1595252230490.png)



![1595252332141](img/1595252332141.png)

![1595252302446](img/1595252302446.png)

DAG还是比较重要的。



##Spark SQL DataFrames

![1595252603579](img/1595252603579.png)

![1595252648459](img/1595252648459.png)

![1595252796040](img/1595252796040.png)

![1595252870562](img/1595252870562.png)



## 进阶

Structured Streaming(SS)

![1595253056145](img/1595253056145.png)

例子：

./bin/run-example org.apache.spark.examples.sql.streaming.StructuredNetworkWordCount localhost 9999

![1595252915034](img/1595252915034.png)



ML Pipelines

![1595253220471](img/1595253220471.png)



阿里云EMR介绍

![1595252980394](img/1595252980394.png)



## Spark SQL

Spark SQL is Apache Spark's module for working with structured data.

![1595340779347](img/1595340779347.png)

![1595340954154](img/1595340954154.png)

![1595341105163](img/1595341105163.png)

![1595341326858](img/1595341326858.png)

![1595341380664](img/1595341380664.png)

![1595341392611](img/1595341392611.png)

![1595341488099](img/1595341488099.png)

![1595341662350](img/1595341662350.png)

![1595341711557](img/1595341711557.png)

![1595341797869](img/1595341797869.png)

![1595341826333](img/1595341826333.png)

![1595341858234](img/1595341858234.png)

![1595342060531](img/1595342060531.png)

![1595342090852](img/1595342090852.png)

![1595342214644](img/1595342214644.png)

![1595342227840](img/1595342227840.png)

![1595342349492](img/1595342349492.png)

explain SQL语句：展示执行过程

explain extended SQL语句：更详细的信息



## Spark for ETL & Data Science

![1595424678470](img/1595424678470.png)

![1595424911975](img/1595424911975.png)

![1595425059693](img/1595425059693.png)

![1595425194283](img/1595425194283.png)

![1595425315101](img/1595425315101.png)

![1595425365597](img/1595425365597.png)

![1595425391365](img/1595425391365.png)

![1595425563680](img/1595425563680.png)

![1595425598054](img/1595425598054.png)

![1595425672683](img/1595425672683.png)

![1595425896424](img/1595425896424.png)

![1595425993460](img/1595425993460.png)

![1595426055626](img/1595426055626.png)

## Delta Lake

![1595511636064](img/1595511636064.png)

![1595511744686](img/1595511744686.png)

![1595511869498](img/1595511869498.png)

![1595511974030](img/1595511974030.png)

![1595512043583](img/1595512043583.png)

![1595512063199](img/1595512063199.png)

![1595512156449](img/1595512156449.png)

![1595512199155](img/1595512199155.png)

![1595512315866](img/1595512315866.png)

![1595512468185](img/1595512468185.png)

![1595512484837](img/1595512484837.png)

![1595512527604](img/1595512527604.png)

![1595512656552](img/1595512656552.png)

![1595512670242](img/1595512670242.png)

![1595512703338](img/1595512703338.png)

![1595512759334](img/1595512759334.png)

![1595512813599](img/1595512813599.png)

![1595512846386](img/1595512846386.png)

![1595512881991](img/1595512881991.png)

![1595513024078](img/1595513024078.png)

![1595513080562](img/1595513080562.png)

![1595513137999](img/1595513137999.png)

![1595513145732](img/1595513145732.png)

![1595513217776](img/1595513217776.png)

![1595513326534](img/1595513326534.png)

